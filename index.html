<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<title>Wasm-powered CEL parser</title>
<style>
#input {
  display: block;
  width: 80%;
  padding: 10px;
  margin: 20px;
  font-family: monospace;
}
.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 3px;
}

.node text {
  font: 18px sans-serif;
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 2px;
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.9.2/d3.min.js"></script>
</head>

<body>
<textarea id="input" autofocus>
let userId = "alice";

let request = {
  "auth": { "uid": "alice" },
  "resource": {
    "data": {
      "files": 1_048_576,
      "status": "old"
    }
  }
};

request.auth != null
  && request.auth.uid == userId
  && request.resource.data.keys() == ["files", "status"]
  && request.resource.data.status == "new"</textarea>

<div id="graph"></div>
<hr>
<pre id="ast"></pre>
</body>
